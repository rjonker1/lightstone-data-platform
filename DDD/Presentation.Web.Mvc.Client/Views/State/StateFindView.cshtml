@using LightstoneApp.Presentation.Web.Mvc.Client.Resources

@model LightstoneApp.Presentation.Web.Mvc.Client.ViewModels.StateFindViewModel

@{ 
	ViewBag.Title = "Find State"; 
}

<h2>@ViewBag.Title</h2>
@using (Ajax.BeginForm(new AjaxOptions { LoadingElementDuration = 400, LoadingElementId = "busyinfo", UpdateTargetId = "results", OnBegin = "onPetitionBegin", OnComplete = "onPetitionComplete" }))
{
	@Html.AntiForgeryToken()
    @Html.ValidationSummary(true)

	<fieldset>
		<legend>State</legend>

		<div id="search">
			<div class="newline">
				<div class="label">
					@Html.LabelFor(model => model.State.Id):
				</div>
				<div class="field">
					@Html.EditorFor(model => model.State.Id)
					@Html.ValidationMessageFor(model => model.State.Id)
				</div>
				<div class="label">
					@Html.LabelFor(model => model.State.Value):
				</div>
				<div class="field">
					@Html.EditorFor(model => model.State.Value)
					@Html.ValidationMessageFor(model => model.State.Value)
				</div>
			</div>
			<div class="buttons">
				<p>
					<input type="reset" name="reset" value="@PresentationResources.Reset" />
					<input type="submit" name="find" value="@PresentationResources.Find" />
				</p>
			</div>
		</div>
		<div id="viewform">[@PresentationResources.ViewForm]</div>
		<div id="busyinfo">
			<img src="~/Content/themes/base/images/busyinfo.gif" alt="@PresentationResources.Loading" />
		</div>
		@{ Html.RenderPartial("_StateFindPartialView"); }
	</fieldset>
}

<div>
	@Html.ActionLink(PresentationResources.GoBack, "Index", "Home")
</div>

@section Scripts 
{
    <script>
        $(document).on("click", "#viewform", function () {
            $("#bcenter").show("slow");
			$("#search").show("slow");
            $("#viewform").hide("slow");
        });

        function onPetitionBegin() {
            $("#results").hide("slow");
            $("#bcenter").hide("slow");
			$("#search").hide("slow");
            $("#viewform").show("slow");
        }

        function onPetitionComplete() {
            $("#results").show("slow");
        }
    </script>
}
