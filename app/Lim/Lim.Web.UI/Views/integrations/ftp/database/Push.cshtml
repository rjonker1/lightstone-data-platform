@using System.Linq
@inherits Nancy.ViewEngines.Razor.NancyRazorViewBase<Lim.Domain.Push.Ftp.Database.PushFtpDatabaseConfiguration>
@{
    Layout = "_Layout.cshtml";
}

<body class="skin-blue">
    <div class="wrapper">
        @Html.Partial("_Header.cshtml")
        @Html.Partial("_Sidebar.cshtml")

        <!-- Content Wrapper. Contains page content -->
        <div class="content-wrapper">
            <!-- Content Header (Page header) -->
            <section class="content-header">
                <h1>
                    LIM
                    <small>FTP Database Push</small>
                </h1>
            </section>
            <!-- Main content -->
            <section class="content">
                <div class="row">
                    <div class="box box-warning">
                        <div class="box-header">
                            <h3 class="box-title">Push Configuration</h3>
                        </div><!-- /.box-header -->
                        <div class="box-body">
                            <form role="form" action="/integrations/for/ftp/database/push/save" method="post">
                                <input type="hidden" name="Id" value="@Model.Id" />
                                <input type="hidden" name="ConfigurationFtpId" value="@Model.ConfigurationFtpId" />
                                <div class="form-group">
                                    <div class="checkbox">
                                        <label>
                                            <input name="IsActive" id="IsActive" checked="@Model.IsActive" value="@Model.IsActive" type="checkbox" />
                                            Is Active
                                        </label>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>LIM Client</label>
                                    <select id="ClientId" name="ClientId" required data-placeholder="Select LIM Client ..." class="chosen-select form-control">
                                        <option value=""></option>
                                        @foreach (var client in Model.SelectableIntegrationClients)
                                        {
                                            var isSelected = Model.SelectableIntegrationClients.FirstOrDefault(f => f.Id == Model.ClientId) != null;
                                            <option id="@client.Id" name="@client.Id" selected="@isSelected" value="@client.Id">@client.Name</option>
                                        }
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Database Extracts</label>
                                    <select id="databaseExtracts" name="DatabaseExtracts" required data-placeholder="Select Database Extracts ..." class="form-control">
                                        @foreach (var databaseExtract in Model.SelectableDatabaseExtracts)
                                        {
                                            var isSelected = Model.DatabaseExtracts != null && Model.DatabaseExtracts.Contains(databaseExtract.Id);
                                            <option id="@databaseExtract.Id" name="@databaseExtract.Id" selected="@isSelected" value="@databaseExtract.Id">@databaseExtract.Name</option>
                                        }
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Frequency</label>
                                    <select id="frequencyType" name="FrequencyType" class="chosen-select form-control">
                                        @foreach (var type in Model.Frequency)
                                        {
                                            var isSelected = type.Id == @Model.FrequencyType;
                                            <option id="@type.Id" data-name="@type.Name" selected="@isSelected" value="@type.Id">@type.Name</option>
                                        }
                                    </select>
                                </div>
                                <div id="custom-time-picker">
                                    <div class="bootstrap-timepicker">
                                        <div class="form-group">
                                            <label>Custom Frequency</label>
                                            <div class="input-group bootstrap-timepicker">
                                                <input id="frequencytime" name="CustomFrequency" value="@Model.CustomFrequency.TimeOfDay" type="text" class="form-control " />
                                                <div class="input-group-addon">
                                                    <i class="fa fa-clock-o"></i>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label>Custom Day</label>
                                        <select id="customDay" name="CustomDay" class="chosen-select form-control">
                                            @foreach (var day in Model.Weekdays)
                                            {
                                                var isSelected = day.Day == @Model.CustomDay;
                                                <option id="@day.Id" data-name="@day.Day" selected="@isSelected" value="@day.Day">@day.Day</option>
                                            }
                                        </select>
                                    </div>
                                </div>
                                <div class="box-footer">
                                    <button type="submit" class="btn btn-primary">Save</button>
                                </div>
                            </form>
                        </div><!-- /.box-body -->
                    </div>
                </div>
            </section><!-- /.content -->
        </div><!-- /.content-wrapper -->
        @Html.Partial("_Footer.cshtml")
    </div>
    <script src="~/assets/jquery/jquery-1.10.2.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script src="~/assets/plugins/input-mask/jquery.inputmask.js" type="text/javascript"></script>
    <script src="~/assets/plugins/input-mask/jquery.inputmask.date.extensions.js" type="text/javascript"></script>
    <script src="~/assets/plugins/input-mask/jquery.inputmask.extensions.js" type="text/javascript"></script>
    <script src="~/assets/plugins/daterangepicker/daterangepicker.js" type="text/javascript"></script>
    <script src="~/assets/plugins/timepicker/bootstrap-timepicker.min.js" type="text/javascript"></script>
    <script src="~/assets/plugins/chosen/chosen.jquery.min.js" type="text/javascript"></script>
    <script src="~/assets/js/app.min.js" type="text/javascript"></script>
    <script src="~/assets/js/frequency-time.js" type="text/javascript"></script>
</body>