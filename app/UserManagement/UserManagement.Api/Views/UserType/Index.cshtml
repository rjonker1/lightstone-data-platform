@using UserManagement.Api.ViewModels
@{
    Layout = "Shared/_Layout.cshtml";
}

@{
    var viewModel = new PageHeadingViewModel("User Types", "");
    var tableId = string.Format("{0}_table", viewModel.Title.Replace(" ", ""));
}
@Html.Partial("Shared/PageHeading", viewModel)

<table id="@tableId" class="table table-striped table-bordered" cellspacing="0" width="100%">
    <thead>
        <tr>
            <th>Id</th>
            <th>Name</th>
            <th>Value</th>
            <th></th>
        </tr>
    </thead>
</table>

@section Scripts{
    <script>
        $(function () {
            var table = $("#@tableId").DataTable({
                dom: '<"toolbar">frtip',
                ajax: "/UserTypes",
                columns: [
                    { data: "id", visible: false },
                    { data: "name" },
                    { data: "value" },
                    { data: null, defaultContent: "<button class='btn btn-primary'>Edit</button>" }
                ]
            });
            
            $("div.toolbar").html('<button class="btn btn-default">Add</button>');
            
            $('#@tableId tbody').on('click', 'button', function () {
                var data = table.row($(this).parents('tr')).data();
                alert(data.id + " - " + data.name);
            });
        });
    </script>
}
