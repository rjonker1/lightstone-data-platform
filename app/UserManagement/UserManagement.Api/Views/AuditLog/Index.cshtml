@using System
@using UserManagement.Api.Modules
@using UserManagement.Api.ViewModels
@using UserManagement.Domain.Dtos
@*@inherits Nancy.ViewEngines.Razor.NancyRazorViewBase<LookupViewModel>*@

@Html.Partial("Shared/PageHeading", new PageHeadingViewModel("Audit Logs", "An audit log of all changes to the data"))

<table id="auditlog_table" class="table table-striped table-bordered" cellspacing="0" width="100%">
    <thead>
        <tr>
            @*<th>Id</th>*@
            <th>Event Date</th>
            <th>Event Type</th>
            <th>Entity Name</th>
            <th>Record Id</th>
            <th>Field Name</th>
            <th>Original Value</th>
            <th>New Value</th>
            <th>Data Type</th>
            <th>Commit Id</th>
            <th>Commit Sequence</th>
            <th>Commit Version</th> 
            

         
        </tr>
    </thead>
</table>

<script>
    
    $('.navmenu').offcanvas('toggle');

    var table = $("#auditlog_table").DataTable({
        dom: '<"table-toolbar">frtip',
        retrieve: true,
        ajax: "/AuditLogs",
        "columns": [
            // { data: "id", visible: true, "defaultContent": "" },
            { data: "eventDateUtc", visible: true, "defaultContent": "" },
            { data: "eventType" },
            { data: "entityName", "defaultContent": "Unknown" },
            { data: "recordId" },
            { data: "fieldName" },
            { data: "originalValue", "defaultContent": "NULL" },
            { data: "newValue", "defaultContent": "NULL" },
            { data: "dataType" },
            { data: "commitId" },
            { data: "commitSequence" },
            { data: "commitVersion" }
        ],
        "order": [[1, 'desc']]
    });


</script>
