@inherits Nancy.ViewEngines.Razor.NancyRazorViewBase<System.Collections.Generic.IEnumerable<Monitoring.Dashboard.UI.Core.Models.MonitoringResponse>>
@{
    Layout = "_Layout.cshtml";
}
@section Header
{
    <link type="text/css" rel="stylesheet" href="~/Content/Styles/json_formatter.css">
}
<div style="display: none">
    <select id="TabSize" onchange=" TabSizeChanged() ">
        <option value="1">1</option>
        <option value="2" selected="true">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
    </select>
</div>
<div>
    @{
    var count = 0;
    foreach (var response in @Model)
    {
        count++;
        var jsonId = "rawJson-" + count;
        var canvasId = "canvas-" + count;
        var toggleId = "toggle-" + count;

        <div class="page_collapsible collapse-open" onclick="toggle('@toggleId'); Process('@jsonId', '@canvasId');">
            <h3>@response.Id @response.Date</h3><span></span>
        </div>
        <div>
            <div style="display:none; border-width:2px; border-style:solid" id="@toggleId">
                <div class="canvas" id="@canvasId"><pre class="CodeContainer"></pre></div>
                <textarea style="display: none" id="@jsonId" class="rawJson">@response.Payload</textarea>
            </div>
        </div>
    }
}

</div>
@section Scripts
{
    <script type="text/javascript" charset="utf-8" src="~/Scripts/json-formatter.js"></script>
    <script language="javascript">
        function toggle(elementId) {

           var ele = document.getElementById(elementId);
            if (ele.style.display === "block") {
                ele.style.display = "none";
                //$(elementId).addClass("collapse-close");
            }
            else {
                ele.style.display = "block";
                //$(elementId).addClass("collapse-open");
            }
        }
    </script>
}