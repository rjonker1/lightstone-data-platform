@inherits Nancy.ViewEngines.Razor.NancyRazorViewBase<System.Collections.Generic.IEnumerable<Monitoring.Dashboard.UI.Core.Models.MonitoringResponse>>
@{
    Layout = "_Layout.cshtml";
}
@section Header
{
    <link type="text/css" rel="stylesheet" href="~/Content/Styles/json_formatter.css">
    <link type="text/css" rel="stylesheet" href="../Content/Styles/monitoring_data_providers.css" />
}
<h1>Monitoring<span>Event Log for Data Providers</span></h1>
<ul class="tabs">
    <li>
        <input type="radio" name="tabs" id="tab1" checked />
        <label for="tab1">Summary</label>
        <div id="tab-content1" class="tab-content">
            <p></p>
        </div>
    </li>
    <li>
        <input type="radio" name="tabs" id="tab2" />
        <label for="tab2">Log</label>
        <div id="tab-content2" class="tab-content">
            <div class="data-provider-container">
                <ul>
                    @{
                        var count = 0;
                        foreach (var response in @Model)
                        {
                            count++;
                            var jsonId = "rawJson-" + count;
                            var canvasId = "canvas-" + count;
                            var toggleId = "toggle-" + count;

                            <li>
                                <h2>
                                    <span><img src="../Content/Images/plus.gif" alt="expand" onclick="Toggle('@toggleId', this, '@jsonId', '@canvasId'); " /></span>@response.Metadata
                                </h2>

                                <div>
                                    <div style="display: none;" id="@toggleId">
                                        <div>
                                            <input type="button" onclick="CollapseAllClicked('@jsonId', '@canvasId'); " value="Collapse"/> <input type="button" value="Expand" onclick="ExpandAllClicked('@jsonId', '@canvasId'); ">
                                        </div>
                                        <div class="canvas" id="@canvasId"><pre class="CodeContainer"></pre></div>
                                        <textarea style="display: none" id="@jsonId" class="rawJson">@response.Payload</textarea>
                                    </div>
                                </div>
                            </li>
                         @*<li onclick="Toggle('@toggleId', this, '@jsonId', '@canvasId'); ">
                        <input type="checkbox" checked/>
                        <i></i>
                        <h2>&nbsp;Events for Aggregate @response.Id @response.Date</h2>
                        <p>
                            <div style="display: none;" id="@toggleId">
                                <div>
                                    <input type="button" onclick="CollapseAllClicked('@jsonId', '@canvasId' ); " value=" collapse" /> <input type="button" value="Expand" onclick="ExpandAllClicked('@jsonId', '@canvasId'); ">
                                </div>
                                <div class="canvas" id="@canvasId"><pre class="CodeContainer"></pre></div>
                                <textarea style="display: none" id="@jsonId" class="rawJson">@response.Payload</textarea>
                            </div>
                        </p>
                    </li>*@
                        }
                    }

                </ul>
            </div>
        </div>
    </li>
</ul>

@section Scripts
{
    <script type="text/javascript" charset="utf-8" src="~/Scripts/json-formatter.js"></script>
}
